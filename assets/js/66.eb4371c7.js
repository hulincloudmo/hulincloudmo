(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{376:function(t,s,n){"use strict";n.r(s);var e=n(0),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("我们天天在写的vue指令，函数是怎么让浏览器能够识别的？怎么实现的判断，循环？其实这是vue模板，他不是html，有指令，差值，js表达式，到底是什么？\n")]),t._v(" "),n("h2",{attrs:{id:"前置知识-js的with语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前置知识-js的with语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 前置知识 => js的with语法")]),t._v(" "),n("p",[t._v("作用：改变自由变量的查找规则，当作传入对象的属性来查找，不建议使用，不易读")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会报错")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"vue-template-compiler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-template-compiler","aria-hidden":"true"}},[t._v("#")]),t._v(" vue-template-compiler")]),t._v(" "),n("h3",{attrs:{id:"插值方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插值方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 插值方式")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compiler "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-template-compiler'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插值")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `<p>{{message}}</p>`")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return createElement('p',[createTextVNode(toString(message))])}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// h -> vnode")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// createElement -> vnode")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// // 表达式")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `<p>{{flag ? message : 'no message found'}}</p>`")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// // with(this){return _c('p',[_v(_s(flag ? message : 'no message found'))])}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// // 属性和动态属性")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     <div id="div1" class="container">')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//         <img :src="imgUrl"/>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     </div>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return _c('div',")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//      {staticClass:"container",attrs:{"id":"div1"}},')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//      [")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//          _c('img',{attrs:{\"src\":imgUrl}})])}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// // 条件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     <div>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         <p v-if=\"flag === 'a'\">A</p>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         <p v-else>B</p>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     </div>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return _c('div',[(flag === 'a')?_c('p',[_v(\"A\")]):_c('p',[_v(\"B\")])])}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 循环")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     <ul>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//         <li v-for="item in list" :key="item.id">{{item.title}}</li>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     </ul>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return _c('ul',_l((list),function(item){return _c('li',{key:item.id},[_v(_s(item.title))])}),0)}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const template = `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     <button @click="clickHandler">submit</button>')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// with(this){return _c(\'button\',{on:{"click":clickHandler}},[_v("submit")])}')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-model")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('<input type="text" v-model="name">')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主要看 input 事件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// with(this){return _c(\'input\',{directives:[{name:"model",rawName:"v-model",value:(name),expression:"name"}],attrs:{"type":"text"},domProps:{"value":(name)},on:{"input":function($event){if($event.target.composing)return;name=$event.target.value}}})}')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// render 函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回 vnode")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// patch")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 编译")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ---------------分割线--------------")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// // 从 vue 源码中找到缩写函数的含义")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// function installRenderHelpers (target) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._o = markOnce;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._n = toNumber;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._s = toString;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._l = renderList;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._t = renderSlot;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._q = looseEqual;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._i = looseIndexOf;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._m = renderStatic;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._f = resolveFilter;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._k = checkKeyCodes;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._b = bindObjectProps;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._v = createTextVNode;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._e = createEmptyVNode;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._u = resolveScopedSlots;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._g = bindObjectListeners;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._d = bindDynamicKeys;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     target._p = prependModifier;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\n")])])]),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("ol",[n("li",[t._v("模板编译为render函数，执行render函数返回vnode\n2.tch和diff")]),t._v(" "),n("li",[t._v("使用webpack vue-loader在开发环境夏编译模板")])])])}),[],!1,null,null,null);s.default=a.exports}}]);